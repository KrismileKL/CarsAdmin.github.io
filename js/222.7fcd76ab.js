"use strict";(self["webpackChunkcars_admin"]=self["webpackChunkcars_admin"]||[]).push([[222],{4779:function(t,e,a){a.r(e),a.d(e,{default:function(){return C}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("TabalData",{ref:"table",attrs:{config:t.table_config},scopedSlots:t._u([{key:"status",fn:function(e){return[a("el-switch",{attrs:{disabled:e.data.id==t.switch_disabled,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return t.switchChange(e.data)}},model:{value:e.data.status,callback:function(a){t.$set(e.data,"status",a)},expression:"slotData.data.status"}})]}},{key:"operation",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.edit(e.data)}}},[t._v("编辑")])]}}])}),a("AddCarsBrand",{attrs:{flagVisible:t.dialog_show,data:t.data_brand},on:{"update:flagVisible":function(e){t.dialog_show=e},"update:flag-visible":function(e){t.dialog_show=e},callbackComponent:t.callbackComponent}})],1)},i=[],o=a(9771),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"cars-dialog-center",attrs:{title:"新增车辆品牌",visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.close,opened:t.opened}},[a("VueForm",{attrs:{formData:t.form_data,formItme:t.form_item,formHandler:t.form_handler},scopedSlots:t._u([{key:"logo",fn:function(){return[a("div",{staticClass:"upload-img-wrap"},[a("div",{staticClass:"upload-img"},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.logo_current,expression:"logo_current"}],attrs:{src:t.logo_current}})]),a("ul",{staticClass:"img-list"},t._l(t.logo,(function(e){return a("li",{key:e.id,on:{click:function(a){t.logo_current=e.img}}},[a("img",{attrs:{src:e.img,alt:e.name}})])})),0)])]},proxy:!0}])})],1)},r=[],l=a(9466),d=a(4471);function c(t={}){return d.Z.request({method:"post",url:"/brand/logo/",data:t})}function u(t={}){return d.Z.request({method:"post",url:"/brand/add/",data:t})}function h(t={}){return d.Z.request({method:"post",url:"/brand/status/",data:t})}function m(t={}){return d.Z.request({method:"post",url:"/brand/edit/",data:t})}var g={name:"",components:{VueForm:l.Z},props:{flagVisible:{type:Boolean,default:!1},data:{type:Object,defult:()=>{}}},data(){return{dialogVisible:!1,form_data:{nameCh:"",nameEn:"",imgUrl:"",status:"",content:""},form_item:[{type:"Input",label:"品牌中文",prop:"nameCh"},{type:"Input",label:"品牌英文",prop:"nameEn"},{type:"Slot",slotName:"logo",label:"LOGO"},{type:"Radio",label:"禁启用",prop:"status",options:this.$store.state.config.radio_disabled}],form_handler:[{label:"确定",key:"submit",type:"danger",handler:()=>this.submit()}],radio_disabled:this.$store.state.config.radio_disabled,logo_current:"",logo:[]}},methods:{opened(){this.getBrandLogo(),this.getDetailed()},getBrandLogo(){if(0!=this.logo.length)return!1;c().then((t=>{const e=t.data;e&&(this.logo=e)}))},getDetailed(){this.form_data=this.data,this.logo_current=this.data.imgUrl,this.form_data.imgUrl=this.data.imgUrl},submit(){this.data.id?this.edit():this.add()},add(){this.form_data.imgUrl=this.logo_current,u(this.form_data).then((t=>{this.$message({type:"success",message:t.message}),this.close(),this.$emit("callbackComponent",{function:"search"})}))},edit(){this.form_data.imgUrl=this.logo_current;const t=JSON.parse(JSON.stringify(this.form_data));m(t).then((t=>{this.$message({type:"success",message:t.message}),this.close(),this.$emit("callbackComponent",{function:"search"})}))},reset(t){for(let e in this.form_data)this.form_data[e]="";this.logo_current=""},close(){this.reset("form"),this.dialogVisible=!1,this.$emit("update:flagVisible",!1)}},watch:{flagVisible:{handler(t,e){this.dialogVisible=t}}}},p=g,f=a(1001),b=(0,f.Z)(p,n,r,!1,null,"239e6e76",null),_=b.exports,w={name:"Parking",components:{AddCarsBrand:_,TabalData:o.Z},data(){return{table_config:{thead:[{label:"LOGO",prop:"imgUrl",type:"image",width:150},{label:"车辆品牌",prop:"nameCh",type:"function",callback:(t,e)=>`${t.nameCh}/${t.nameEn}`},{label:"禁启用",prop:"status",type:"slot",slotName:"status"},{label:"操作",type:"operation",width:200,default:{deleteButton:!0},slotName:"operation"}],url:"brandList",data:{pageSize:10,pageNumber:1},form_item:[{label:"车辆品牌",prop:"brand",type:"Input",width:"150px",options:"parking_type",placeholder:"请输入车辆品牌"}],form_handler:[{label:"新增车辆品牌",prop:"add",type:"danger",element:"button",handler:()=>{this.dialog_show=!0}}],form_config:{resetButton:!0}},row_id:"",data_brand:{},switch_disabled:"",dialog_show:!1,form:{brand:""}}},methods:{callbackComponent(t){console.log(t),t.function&&this[t.function]()},search(){const t={pageSize:10,pageNumber:1};this.form.brand&&(t.brand=this.form.brand),this.$refs.table.requestData(t)},edit(t){this.data_brand=Object.assign({},t),this.dialog_show=!0},switchChange(t){if(this.switch_flag)return!1;const e={id:t.id,status:t.status};this.switch_disabled=t.id,h(e).then((t=>{this.$message({type:"success",message:t.message}),this.switch_disabled=""})).catch((t=>{this.switch_disabled=""}))}}},y=w,k=(0,f.Z)(y,s,i,!1,null,"0ea010d6",null),C=k.exports}}]);
"use strict";(self["webpackChunkcars_admin"]=self["webpackChunkcars_admin"]||[]).push([[662],{7176:function(t,e,a){a.d(e,{Z:function(){return c}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"cars-dialog-center",attrs:{title:t.data.parkingName,visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.close,opened:t.opened}},[a("div",{staticStyle:{height:"500px"}},[a("AMap",{ref:"aMap"})],1)])},r=[],o=a(427),i={name:"",components:{AMap:o.Z},props:{flagVisible:{type:Boolean,default:!1},data:{type:Object,default:()=>{}}},data(){return{dialogVisible:!1}},methods:{opened(){this.$refs.aMap.mapCreate(),this.$nextTick((()=>{const t=this.data.lnglat.split(","),e={lng:t[0],lat:t[1]};this.$refs.aMap.setMarker(e)}))},close(){this.$refs.aMap.mapDestroy(),this.$emit("update:flagVisible",!1)}},watch:{flagVisible:{handler(t,e){this.dialogVisible=t}}}},s=i,l=a(1001),d=(0,l.Z)(s,n,r,!1,null,"1a0487f8",null),c=d.exports},3560:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("TabalData",{ref:"table",attrs:{config:t.table_config},scopedSlots:t._u([{key:"status",fn:function(e){return[a("el-switch",{attrs:{disabled:e.data.id==t.switch_disabled,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(a){return t.switchChange(e.data)}},model:{value:e.data.status,callback:function(a){t.$set(e.data,"status",a)},expression:"slotData.data.status"}})]}}])}),a("MapLocation",{attrs:{flagVisible:t.map_show,data:t.parking_data},on:{"update:flagVisible":function(e){t.map_show=e},"update:flag-visible":function(e){t.map_show=e}}})],1)},r=[],o=a(3185),i=a(7176),s=a(9771),l=a(7535),d=(a(7662),{name:"Cars",data(){return{table_config:{thead:[{label:"订单号",prop:"order_no"},{label:"状态",prop:"order_status",type:"function",callback:t=>{const e=this.$store.state.config.order_status,a=e[t.order_status];return a?a.zh:""}},{label:"日期",prop:"create_date",type:"function",callback:t=>{if(!t.create_date)return"";const e=t.create_date.split(" ");return`${e[0]} <br/> ${e[1]}`}},{label:"金额",prop:"amount"},{label:"操作",type:"operation",width:550,default:{deleteButton:!0,editButton:!0,editButtonLink:"CarsAdd"},buttonGroup:[{label:"编辑",type:"danger",event:"link",name:"CarsAdd",key:"id",value:"id"},{label:"待取车",type:"",event:"button",handler:t=>this.orderWait(t)},{label:"超时",type:"",event:"button",handler:t=>this.orderOvertime(t)},{label:"完成",type:"",event:"button",handler:t=>this.orderOver(t)},{label:"取消",type:"",event:"button",handler:t=>this.orderCancel(t)},{label:"待还车",type:"",event:"button",handler:t=>this.ordrerReturn(t)}]}],url:"orderList",data:{pageSize:10,pageNumber:1},form_item:[{label:"城市",type:"City"},{label:"类型",prop:"parkingType",type:"Select",width:"120px",options:"parking_type"},{label:"禁启用",prop:"status",type:"Select",width:"120px",options:"radio_disabled"},{label:"关键字",type:"Keyword"}],form_handler:[{label:"新增",prop:"add",type:"success",element:"link",router:"/carsAdd"},{label:"下载",prop:"down",type:"success",element:"button",handler:()=>this.aaaa()}],form_config:{resetButton:!0}},switch_disabled:"",switch_flag:!1,parking_status:this.$store.state.config.radio_disabled,parking_type:this.$store.state.config.parking_type,map_show:!1,parking_data:{},table_loading:!1,rowId:""}},components:{CityArea:o.Z,MapLocation:i.Z,TabalData:s.Z},methods:{callbackComponent(t){t.function&&this[t.function](t.data)},switchChange(t){if(this.switch_flag)return!1;const e={id:t.id,status:t.status};this.switch_disabled=t.id,CarsStatus(e).then((t=>{this.$message({type:"success",message:t.message}),this.switch_disabled=""})).catch((t=>{this.switch_disabled=""}))},showMap(t){this.map_show=!0,this.parking_data=t},aaaa(){alert(1111)},orderWait(t){(0,l.xl)({order_no:t.order_no,cars_id:t.cars_id}).then((t=>{this.loadData()}))},orderOvertime(t){(0,l.RQ)({order_no:t.order_no,cars_id:t.cars_id}).then((t=>{this.loadData()}))},orderOver(t){(0,l.RY)({order_no:t.order_no,cars_id:t.cars_id}).then((t=>{this.loadData()}))},orderCancel(t){(0,l.xm)({order_no:t.order_no,cars_id:t.cars_id}).then((t=>{this.loadData()}))},ordrerReturn(t){(0,l.QN)({order_no:t.order_no,cars_id:t.cars_id}).then((t=>{this.loadData()}))},loadData(){this.$refs.table.requestData()}},beforeMount(){},mounted(){}}),c=d,u=a(1001),p=(0,u.Z)(c,n,r,!1,null,"78dce772",null),h=p.exports},427:function(t,e,a){a.d(e,{Z:function(){return m}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"amap-wrap"},[a("el-amap",{staticClass:"amap-demo",attrs:{vid:"amapContainer",events:t.events}})],1)},r=[],o=a(5275);function i(t){return{lng:t.lnglat.getLng(),lat:t.lnglat.getLat(),value:t.lnglat.getLng()+","+t.lnglat.getLat()}}function s(t,e){const a=new AMap.Geocoder;a.getLocation(t,(function(t,a){if(console.log(a),"complete"===t&&"OK"==a.info){let t=a.geocodes[0].location.lat,n=a.geocodes[0].location.lng;e.setCenter([n,t]),console.log(t,n)}}))}let l=null;function d(t,e){l&&(e.remove(l),l=null),l=new AMap.Marker({position:[t.lng,t.lat]}),e.add(l),e.setFitView()}function c(t){l&&(t.remove(l),l=null)}var u={name:"Amap",data(){return{lnglat:{},map:null,zoom:18,events:{}}},mounted(){o.lazyAMapApiLoaderInstance.load().then((()=>{this.mapCreate(),this.map.on("click",(t=>{const e=i(t);this.lnglat=e,this.$emit("callback",{function:"getLnglat",data:{lnglat:e}}),this.setMarker()}))}))},methods:{mapCreate(t){this.map=new AMap.Map("amapContainer",{center:[121.59996,31.197646],zoom:this.zoom}),this.map.on("complete",(()=>{this.mapLoad()}))},mapLoad(){this.options.mapLoad&&this.$emit("callback",{function:"mapLoad"})},mapDestroy(){this.map&&this.map.destroy()},setMapCenter(t){s(t,this.map)},setMarker(t){d(t||this.lnglat,this.map)},clearMarker(){c(this.map)}},props:{options:{type:Object,default:()=>{}}}},p=u,h=a(1001),f=(0,h.Z)(p,n,r,!1,null,null,null),m=f.exports},7535:function(t,e,a){a.d(e,{Fv:function(){return d},QN:function(){return l},RQ:function(){return o},RY:function(){return i},xl:function(){return r},xm:function(){return s}});var n=a(4471);function r(t={}){return n.Z.request({method:"post",url:"/order/wait/",data:t})}function o(t={}){return n.Z.request({method:"post",url:"/order/overtime/",data:t})}function i(t={}){return n.Z.request({method:"post",url:"/order/over/",data:t})}function s(t={}){return n.Z.request({method:"post",url:"/order/cancel/",data:t})}function l(t={}){return n.Z.request({method:"post",url:"/order/return/",data:t})}function d(t={}){return n.Z.request({method:"post",url:"/order/list/",data:t})}},7662:function(t,e,a){a.d(e,{Fz:function(){return o},Lk:function(){return r},Mk:function(){return s},tl:function(){return i}});var n=a(403);function r(t){let e=t,a="";if(e){let t=e.split(",");a+=t[0],t[1]&&(a+=`<br/>${t[1]}`)}return a}function o(t){const e=n.Z.state.config.parking_type_json[t];if(e)return e.label}function i(t){const e=n.Z.state.config.year_check,a=e.filter((e=>e.value===t));return a.length>0?a[0].label:""}function s(t){const e=n.Z.state.config.energyType,a=e.filter((e=>e.value===parseInt(t)));return a.length>0?a[0].label:""}}}]);
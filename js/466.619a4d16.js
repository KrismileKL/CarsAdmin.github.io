(self["webpackChunkcars_admin"]=self["webpackChunkcars_admin"]||[]).push([[466],{2466:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return f}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"login"}},[s("div",{staticClass:"form-wrap"},[s("ul",{staticClass:"menu-tab"},e._l(e.menu_switch_item,(function(t){return s("li",{key:t.type,class:{current:e.current_menu===t.type},on:{click:function(s){return e.toggleHigh(t.type)}}},[e._v(" "+e._s(t.label)+" ")])})),0),s("el-form",{ref:"form",attrs:{model:e.form,rules:e.form_rules}},[s("el-form-item",{attrs:{prop:"name"}},[s("label",{staticClass:"form-label"},[e._v("用户名")]),s("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("label",{staticClass:"form-label"},[e._v("密码")]),s("el-input",{attrs:{type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"register"===e.current_menu,expression:"current_menu === 'register'"}],attrs:{prop:"passwords"}},[s("label",{staticClass:"form-label"},[e._v("确认密码")]),s("el-input",{attrs:{type:"password"},model:{value:e.form.passwords,callback:function(t){e.$set(e.form,"passwords",t)},expression:"form.passwords"}})],1),s("el-form-item",{attrs:{prop:"code"}},[s("label",{staticClass:"form-label"},[e._v("验证码")]),s("el-row",{attrs:{gutter:10}},[s("el-col",{attrs:{span:14}},[s("el-input",{model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),s("el-col",{attrs:{span:10}},[s("el-button",{staticClass:"el-button-block",attrs:{type:"success",disabled:e.code_disabled,loading:e.code_loading},on:{click:function(t){return e.getCodeFn()}}},[e._v(e._s(e.code_text))])],1)],1)],1),s("el-form-item",[s("el-button",{staticClass:"el-button-block",attrs:{type:"danger",disabled:e.submit_disabled},on:{click:function(t){return e.submitForm("form")}}},[e._v(e._s("login"===e.current_menu?"登录":"注册"))])],1)],1)],1)])},o=[],a=(s(7658),s(3810)),i=s.n(a),n=s(835);function l(e){let t=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;return t.test(e)}function h(e){let t=/^(?!\D+$)(?![^a-zA-Z]+$)\S{6,20}$/;return t.test(e)}var c=s(2223),u={name:"Login",setup(e,{root:t,refs:s}){const r=(0,n.qj)([{type:"login",label:"登录"},{type:"register",label:"注册"}]);let o=(0,n.iH)(r[0].type);const a=(0,n.qj)({name:"",password:"",passwords:"",code:""});let u=(0,n.iH)("获取验证码"),_=(0,n.iH)(!1),d=(0,n.iH)(!1),p=(0,n.iH)(null),f=(0,n.iH)(!0);const H=(e,t,s)=>{let r=l(t);""===t?s(new Error("请输入邮箱")):r?s():s(new Error("邮箱格式不正确"))},m=(e,t,s)=>{let r=h(t),o=a.passwords;""===t?s(new Error("请输入密码")):r?o&&o!==t?s(new Error("两次密码不一致，请重新输入")):s():s(new Error("请入 >=6 并且 <= 20 位的密码，包含数字、字母"))},S=(e,t,s)=>{let r=a.password;if("login"===o.value)return s(),!1;""===t?s(new Error("请输入确认密码")):r!==t?s(new Error("两次密码不一致，请重新输入")):s()},b=(e,t,s)=>{""===t?s(new Error("请输入验证码")):6!==t.length?s(new Error("请输入长度为6位数的验证码")):s()},E=(0,n.qj)({name:[{validator:H,trigger:"blur"}],password:[{validator:m,trigger:"blur"}],passwords:[{validator:S,trigger:"blur"}],code:[{validator:b,trigger:"blur"}]}),A=e=>{o.value=e},v=e=>{let t=e;d.value=!0,u.value=`倒计进${t}秒`,p=setInterval((()=>{t--,u.value=`倒计进${t}秒`,t<0&&(u.value="重新获取",d.value=!1,clearInterval(p))}),1e3)},C=()=>{if(""===a.name)return t.$message.error("邮箱不能为空！！"),!1;if(!l(a.name))return t.$message({message:"邮箱格式有误，请重新输入！！",type:"error"}),!1;let e={username:a.name,module:o.value};u.value="发送中",_.value=!0,(0,c.EO)(e).then((e=>{console.log(e),t.$message({message:e.message,type:"success"}),f.value=!1,_.value=!1,v(60)})).catch((e=>{u.value="重新获取",_.value=!1}))},g=e=>{s[e].validate((e=>{if(!e)return console.log("error submit!!"),!1;"login"===o.value?w():y()}))},w=()=>{const e={username:a.name,password:i()(a.password),code:a.code};t.$store.dispatch("app/loginAction",e).then((e=>{t.$message({message:e.message,type:"success"}),t.$router.push({name:"ConsoleIndex"})})).catch((e=>{k()}))},y=()=>{const e={username:a.name,password:i()(a.password),code:a.code};(0,c.aX)(e).then((e=>{t.$message({message:e.message,type:"success"}),k()})).catch((e=>{k()}))},k=()=>{s["form"].resetFields(),o.value="login",p&&clearInterval(p),d.value=!1,u.value="获取验证码"};return{form:a,menu_switch_item:r,current_menu:o,form_rules:E,code_text:u,code_loading:_,code_disabled:d,submit_disabled:f,toggleHigh:A,getCodeFn:C,submitForm:g,login:w,register:y}}},_=u,d=s(1001),p=(0,d.Z)(_,r,o,!1,null,"70a526d7",null),f=p.exports},3810:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;
/*
 * [js-sha1]{@link https://github.com/emn178/js-sha1}
 *
 * @version 0.6.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(){"use strict";var root="object"===typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"===typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=__webpack_require__.g);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&module.exports,AMD=__webpack_require__.amdO,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(e){return function(t){return new Sha1(!0).update(t)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Sha1},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var s=OUTPUT_TYPES[t];e[s]=createOutputMethod(s)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"===typeof e)return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(e){if(!this.finalized){var t="string"!==typeof e;t&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));var s,r,o=0,a=e.length||0,i=this.blocks;while(o<a){if(this.hashed&&(this.hashed=!1,i[0]=this.block,i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0),t)for(r=this.start;o<a&&r<64;++o)i[r>>2]|=e[o]<<SHIFT[3&r++];else for(r=this.start;o<a&&r<64;++o)s=e.charCodeAt(o),s<128?i[r>>2]|=s<<SHIFT[3&r++]:s<2048?(i[r>>2]|=(192|s>>6)<<SHIFT[3&r++],i[r>>2]|=(128|63&s)<<SHIFT[3&r++]):s<55296||s>=57344?(i[r>>2]|=(224|s>>12)<<SHIFT[3&r++],i[r>>2]|=(128|s>>6&63)<<SHIFT[3&r++],i[r>>2]|=(128|63&s)<<SHIFT[3&r++]):(s=65536+((1023&s)<<10|1023&e.charCodeAt(++o)),i[r>>2]|=(240|s>>18)<<SHIFT[3&r++],i[r>>2]|=(128|s>>12&63)<<SHIFT[3&r++],i[r>>2]|=(128|s>>6&63)<<SHIFT[3&r++],i[r>>2]|=(128|63&s)<<SHIFT[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=i[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,t,s,r=this.h0,o=this.h1,a=this.h2,i=this.h3,n=this.h4,l=this.blocks;for(t=16;t<80;++t)s=l[t-3]^l[t-8]^l[t-14]^l[t-16],l[t]=s<<1|s>>>31;for(t=0;t<20;t+=5)e=o&a|~o&i,s=r<<5|r>>>27,n=s+e+n+1518500249+l[t]<<0,o=o<<30|o>>>2,e=r&o|~r&a,s=n<<5|n>>>27,i=s+e+i+1518500249+l[t+1]<<0,r=r<<30|r>>>2,e=n&r|~n&o,s=i<<5|i>>>27,a=s+e+a+1518500249+l[t+2]<<0,n=n<<30|n>>>2,e=i&n|~i&r,s=a<<5|a>>>27,o=s+e+o+1518500249+l[t+3]<<0,i=i<<30|i>>>2,e=a&i|~a&n,s=o<<5|o>>>27,r=s+e+r+1518500249+l[t+4]<<0,a=a<<30|a>>>2;for(;t<40;t+=5)e=o^a^i,s=r<<5|r>>>27,n=s+e+n+1859775393+l[t]<<0,o=o<<30|o>>>2,e=r^o^a,s=n<<5|n>>>27,i=s+e+i+1859775393+l[t+1]<<0,r=r<<30|r>>>2,e=n^r^o,s=i<<5|i>>>27,a=s+e+a+1859775393+l[t+2]<<0,n=n<<30|n>>>2,e=i^n^r,s=a<<5|a>>>27,o=s+e+o+1859775393+l[t+3]<<0,i=i<<30|i>>>2,e=a^i^n,s=o<<5|o>>>27,r=s+e+r+1859775393+l[t+4]<<0,a=a<<30|a>>>2;for(;t<60;t+=5)e=o&a|o&i|a&i,s=r<<5|r>>>27,n=s+e+n-1894007588+l[t]<<0,o=o<<30|o>>>2,e=r&o|r&a|o&a,s=n<<5|n>>>27,i=s+e+i-1894007588+l[t+1]<<0,r=r<<30|r>>>2,e=n&r|n&o|r&o,s=i<<5|i>>>27,a=s+e+a-1894007588+l[t+2]<<0,n=n<<30|n>>>2,e=i&n|i&r|n&r,s=a<<5|a>>>27,o=s+e+o-1894007588+l[t+3]<<0,i=i<<30|i>>>2,e=a&i|a&n|i&n,s=o<<5|o>>>27,r=s+e+r-1894007588+l[t+4]<<0,a=a<<30|a>>>2;for(;t<80;t+=5)e=o^a^i,s=r<<5|r>>>27,n=s+e+n-899497514+l[t]<<0,o=o<<30|o>>>2,e=r^o^a,s=n<<5|n>>>27,i=s+e+i-899497514+l[t+1]<<0,r=r<<30|r>>>2,e=n^r^o,s=i<<5|i>>>27,a=s+e+a-899497514+l[t+2]<<0,n=n<<30|n>>>2,e=i^n^r,s=a<<5|a>>>27,o=s+e+o-899497514+l[t+3]<<0,i=i<<30|i>>>2,e=a^i^n,s=o<<5|o>>>27,r=s+e+r-899497514+l[t+4]<<0,a=a<<30|a>>>2;this.h0=this.h0+r<<0,this.h1=this.h1+o<<0,this.h2=this.h2+a<<0,this.h3=this.h3+i<<0,this.h4=this.h4+n<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,s=this.h2,r=this.h3,o=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,s=this.h2,r=this.h3,o=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,s>>24&255,s>>16&255,s>>8&255,255&s,r>>24&255,r>>16&255,r>>8&255,255&r,o>>24&255,o>>16&255,o>>8&255,255&o]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}}]);
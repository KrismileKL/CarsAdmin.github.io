"use strict";(self["webpackChunkcars_admin"]=self["webpackChunkcars_admin"]||[]).push([[593],{6237:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("TabalData",{ref:"table",attrs:{config:t.table_config},scopedSlots:t._u([{key:"content",fn:function(){return[a("div",{staticClass:"margin-bottom-25"},t._l(t.cars_list_basis_item,(function(e){return a("el-button",{key:e.id,attrs:{type:t.cars_list_basis_type_id==e.id?"danger":"",size:"small",a:e.id},on:{click:function(a){return t.getTypeList(e)}}},[t._v(" "+t._s(e.value)+" ")])})),1)]},proxy:!0}])}),a("AddCarsAttr",{attrs:{flagVisible:t.dialog_show,data:t.current_cars_type_data},on:{"update:flagVisible":function(e){t.dialog_show=e},"update:flag-visible":function(e){t.dialog_show=e}}})],1)},r=[],i=a(9771),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"cars-dialog-center",attrs:{title:"车辆自定义属性添加",width:"30%",visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e},close:t.close,opened:t.opened}},[a("VueForm",{ref:"formVue",attrs:{formData:t.form_data,formItme:t.form_item,formHandler:t.form_handler}})],1)},l=[],o=a(9466),d=a(401),u={name:"",components:{VueForm:o.Z},props:{flagVisible:{type:Boolean,default:!1},data:{type:Object,defult:()=>{}}},data(){return{dialogVisible:!1,form_data:{key:"",value:"",typeValue:""},form_item:[{type:"Input",label:"当前属性",prop:"typeValue",disabled:!0},{type:"Input",label:"字段",prop:"key"},{type:"Input",label:"文本",prop:"value"}],form_handler:[{label:"确定",key:"submit",type:"danger",handler:()=>this.submit()}],radio_disabled:this.$store.state.config.radio_disabled,logo_current:"",logo:[]}},methods:{opened(){},submit(){this.add()},add(){const t={typeId:this.data.id,key:this.form_data.key,value:this.form_data.value};(0,d.nj)(t).then((t=>{this.$message({message:t.message,type:"success"}),this.reset()}))},reset(t){this.$refs.formVue.resetForm()},close(){this.reset("form"),this.dialogVisible=!1,this.$emit("update:flagVisible",!1)}},watch:{flagVisible:{handler(t,e){this.dialogVisible=t}},data:{handler(t){this.form_data.typeValue=t.value}}}},c=u,p=a(1001),_=(0,p.Z)(c,n,l,!1,null,"015d42b8",null),f=_.exports,h=(a(7662),{name:"Cars",data(){return{table_config:{isRequest:!1,checkbox:!1,pagination:!1,thead:[{label:"文本",prop:"value"},{label:"字段",prop:"key"}],url:"carsAttrList",data:{pageSize:10,pageNumber:1},form_item:[{label:"关键字",type:"Keyword",options:["key","value"]}],form_handler:[{label:"新增",prop:"add",type:"success",element:"button",handler:()=>this.carsTypeAddDialog()}],form_config:{resetButton:!0}},switch_disabled:"",cars_list_basis_item:[],cars_list_basis_type_id:"",dialog_show:!1,current_cars_type_data:{}}},components:{TabalData:i.Z,AddCarsAttr:f},methods:{callbackComponent(t){t.function&&this[t.function](t.data)},getTypeList(t){this.cars_list_basis_type_id=t.id,this.current_cars_type_data=t,this.getCarsTypeList()},getCarsTypeBasis(){return(0,d.Aj)().then((t=>{const e=t.data.data;return this.cars_list_basis_item=e,e}))},async getCarsType(){const t=await this.getCarsTypeBasis();this.current_cars_type_data.id=t[0].id,this.cars_list_basis_type_id=t[0].id,this.$refs.table.requestData({typeId:this.current_cars_type_data.id})},getCarsTypeList(){this.$refs.table.requestData({typeId:this.current_cars_type_data.id})},carsTypeAddDialog(){if(!this.current_cars_type_data.id)return this.$message({message:"请选择车辆公共属性",type:"error"}),!1;this.dialog_show=!0}},beforeMount(){this.getCarsType()},mounted(){}}),b=h,m=(0,p.Z)(b,s,r,!1,null,"3d04eb00",null),y=m.exports},401:function(t,e,a){a.d(e,{Aj:function(){return r},YE:function(){return i},nj:function(){return n}});var s=a(4471);function r(t={}){return s.Z.request({method:"post",url:"/carsAttr/type/",data:t})}function i(t={}){return s.Z.request({method:"post",url:"/carsAttr/list/",data:t})}function n(t={}){return s.Z.request({method:"post",url:"/carsAttr/add/",data:t})}},7662:function(t,e,a){a.d(e,{Fz:function(){return i},Lk:function(){return r},Mk:function(){return l},tl:function(){return n}});var s=a(403);function r(t){let e=t,a="";if(e){let t=e.split(",");a+=t[0],t[1]&&(a+=`<br/>${t[1]}`)}return a}function i(t){const e=s.Z.state.config.parking_type_json[t];if(e)return e.label}function n(t){const e=s.Z.state.config.year_check,a=e.filter((e=>e.value===t));return a.length>0?a[0].label:""}function l(t){const e=s.Z.state.config.energyType,a=e.filter((e=>e.value===parseInt(t)));return a.length>0?a[0].label:""}}}]);
"use strict";(self["webpackChunkcars_admin"]=self["webpackChunkcars_admin"]||[]).push([[535],{7176:function(t,a,e){e.d(a,{Z:function(){return p}});var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-dialog",{staticClass:"cars-dialog-center",attrs:{title:t.data.parkingName,visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(a){t.dialogVisible=a},close:t.close,opened:t.opened}},[e("div",{staticStyle:{height:"500px"}},[e("AMap",{ref:"aMap"})],1)])},l=[],i=e(427),s={name:"",components:{AMap:i.Z},props:{flagVisible:{type:Boolean,default:!1},data:{type:Object,default:()=>{}}},data(){return{dialogVisible:!1}},methods:{opened(){this.$refs.aMap.mapCreate(),this.$nextTick((()=>{const t=this.data.lnglat.split(","),a={lng:t[0],lat:t[1]};this.$refs.aMap.setMarker(a)}))},close(){this.$refs.aMap.mapDestroy(),this.$emit("update:flagVisible",!1)}},watch:{flagVisible:{handler(t,a){this.dialogVisible=t}}}},o=s,r=e(1001),c=(0,r.Z)(o,n,l,!1,null,"1a0487f8",null),p=c.exports},3907:function(t,a,e){e.r(a),e.d(a,{default:function(){return f}});var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("TabalData",{ref:"table",attrs:{config:t.table_config},scopedSlots:t._u([{key:"status",fn:function(a){return[e("el-switch",{attrs:{disabled:a.data.id==t.switch_disabled,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(e){return t.switchChange(a.data)}},model:{value:a.data.status,callback:function(e){t.$set(a.data,"status",e)},expression:"slotData.data.status"}})]}}])}),e("MapLocation",{attrs:{flagVisible:t.map_show,data:t.parking_data},on:{"update:flagVisible":function(a){t.map_show=a},"update:flag-visible":function(a){t.map_show=a}}})],1)},l=[],i=e(3185),s=e(7176),o=e(9771),r=e(7805),c=e(7662),p={name:"Cars",data(){return{table_config:{thead:[{label:"车牌号",prop:"carsMode"},{label:"车辆品牌",prop:"nameCh"},{label:"车辆LOGO",prop:"imgUrl",type:"image"},{label:"车辆图片",prop:"carsImg",type:"image"},{label:"年检",prop:"yearCheck",type:"function",callback:(t,a)=>(0,c.tl)(t[a]),width:"100px"},{label:"能源类型",prop:"energyType",type:"function",callback:(t,a)=>(0,c.Mk)(t[a]),width:"100px"},{label:"禁启用",prop:"status",type:"slot",slotName:"status",width:"100px"},{label:"车辆状态",prop:"cars_status",type:"function",callback:t=>{const a=this.$store.state.config.cars_status,e=a[t.carsStatus];return e?e.zh:""}},{label:"停车场",prop:"parkingName"},{label:"区域",prop:"address",type:"function",callback:(t,a)=>(0,c.Lk)(t[a])},{label:"操作",type:"operation",width:300,default:{deleteButton:!0,editButton:!0,editButtonLink:"CarsAdd"},buttonGroup:[{label:"编辑",type:"danger",event:"link",name:"CarsAdd",key:"id",value:"id"},{label:"车辆释放",type:"",event:"button",handler:t=>this.lock(t)}]}],url:"carsList",data:{pageSize:10,pageNumber:1},form_item:[{label:"城市",type:"City"},{label:"类型",prop:"parkingType",type:"Select",width:"120px",options:"parking_type"},{label:"禁启用",prop:"status",type:"Select",width:"120px",options:"radio_disabled"},{label:"关键字",type:"Keyword"}],form_handler:[{label:"新增",prop:"add",type:"success",element:"link",router:"/carsAdd"},{label:"下载",prop:"down",type:"success",element:"button",handler:()=>this.aaaa()}],form_config:{resetButton:!0}},switch_disabled:"",switch_flag:!1,parking_status:this.$store.state.config.radio_disabled,parking_type:this.$store.state.config.parking_type,map_show:!1,parking_data:{},table_loading:!1,rowId:""}},components:{CityArea:i.Z,MapLocation:s.Z,TabalData:o.Z},methods:{callbackComponent(t){t.function&&this[t.function](t.data)},switchChange(t){if(this.switch_flag)return!1;const a={id:t.id,status:t.status};this.switch_disabled=t.id,(0,r.VD)(a).then((t=>{this.$message({type:"success",message:t.message}),this.switch_disabled=""})).catch((t=>{this.switch_disabled=""}))},showMap(t){this.map_show=!0,this.parking_data=t},lock(t){(0,r.$u)({id:t.id})},aaaa(){alert(1111)}},beforeMount(){},mounted(){}},d=p,u=e(1001),h=(0,u.Z)(d,n,l,!1,null,"218bf150",null),f=h.exports},427:function(t,a,e){e.d(a,{Z:function(){return g}});var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"amap-wrap"},[e("el-amap",{staticClass:"amap-demo",attrs:{vid:"amapContainer",events:t.events}})],1)},l=[],i=e(5275);function s(t){return{lng:t.lnglat.getLng(),lat:t.lnglat.getLat(),value:t.lnglat.getLng()+","+t.lnglat.getLat()}}function o(t,a){const e=new AMap.Geocoder;e.getLocation(t,(function(t,e){if(console.log(e),"complete"===t&&"OK"==e.info){let t=e.geocodes[0].location.lat,n=e.geocodes[0].location.lng;a.setCenter([n,t]),console.log(t,n)}}))}let r=null;function c(t,a){r&&(a.remove(r),r=null),r=new AMap.Marker({position:[t.lng,t.lat]}),a.add(r),a.setFitView()}function p(t){r&&(t.remove(r),r=null)}var d={name:"Amap",data(){return{lnglat:{},map:null,zoom:18,events:{}}},mounted(){i.lazyAMapApiLoaderInstance.load().then((()=>{this.mapCreate(),this.map.on("click",(t=>{const a=s(t);this.lnglat=a,this.$emit("callback",{function:"getLnglat",data:{lnglat:a}}),this.setMarker()}))}))},methods:{mapCreate(t){this.map=new AMap.Map("amapContainer",{center:[121.59996,31.197646],zoom:this.zoom}),this.map.on("complete",(()=>{this.mapLoad()}))},mapLoad(){this.options.mapLoad&&this.$emit("callback",{function:"mapLoad"})},mapDestroy(){this.map&&this.map.destroy()},setMapCenter(t){o(t,this.map)},setMarker(t){c(t||this.lnglat,this.map)},clearMarker(){p(this.map)}},props:{options:{type:Object,default:()=>{}}}},u=d,h=e(1001),f=(0,h.Z)(u,n,l,!1,null,null,null),g=f.exports},7662:function(t,a,e){e.d(a,{Fz:function(){return i},Lk:function(){return l},Mk:function(){return o},tl:function(){return s}});var n=e(403);function l(t){let a=t,e="";if(a){let t=a.split(",");e+=t[0],t[1]&&(e+=`<br/>${t[1]}`)}return e}function i(t){const a=n.Z.state.config.parking_type_json[t];if(a)return a.label}function s(t){const a=n.Z.state.config.year_check,e=a.filter((a=>a.value===t));return e.length>0?e[0].label:""}function o(t){const a=n.Z.state.config.energyType,e=a.filter((a=>a.value===parseInt(t)));return e.length>0?e[0].label:""}}}]);